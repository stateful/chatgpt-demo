"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ExtractInfoPrompt = void 0;
const lodash_1 = require("lodash");
var ProductInfo;
(function (ProductInfo) {
    ProductInfo["ProductName"] = "Product Name";
    ProductInfo["ProductDescription"] = "Product Description";
    ProductInfo["ProductModelNumber"] = "Product Model Number";
    ProductInfo["ProductSerialNumber"] = "Product Serial Number";
    ProductInfo["ProductPurchaseDate"] = "Product Purchase Date";
})(ProductInfo || (ProductInfo = {}));
var PurchaseInfo;
(function (PurchaseInfo) {
    PurchaseInfo["OrderID"] = "Order ID";
    PurchaseInfo["OrderQuantity"] = "Order Quantity";
    PurchaseInfo["AccountNumber"] = "Account Number";
    PurchaseInfo["ShippingAddress"] = "Shipping Address";
    PurchaseInfo["BillingAddress"] = "Billing Address";
    PurchaseInfo["PaymentMethod"] = "Payment method";
})(PurchaseInfo || (PurchaseInfo = {}));
var SupportInfo;
(function (SupportInfo) {
    SupportInfo["IssueDescription"] = "Issue Description";
    SupportInfo["ErrorMessage"] = "Error Message";
    SupportInfo["TroubleshootingStepsTaken"] = "Troubleshooting Steps Taken";
    SupportInfo["SupportTicketNumber"] = "Support Ticket Number";
    SupportInfo["SupportAgentName"] = "Support Agent Name";
    SupportInfo["ContactInformation"] = "Contact Information";
    SupportInfo["Feedback"] = "Feedback";
    SupportInfo["OrderDetailsIncluded"] = "Order Details Included";
    SupportInfo["ShippingDetailsIncluded"] = "Shipping Details Included";
})(SupportInfo || (SupportInfo = {}));
/**
 * A prompt used for extracting information from customer support interactions
 * @export
 */
class ExtractInfoPrompt {
    constructor(entities) {
        if ((0, lodash_1.isEmpty)(entities)) {
            throw new Error(`No info defined to extract`);
        }
        // unique names and classes
        this.entityValue = (0, lodash_1.flow)((0, lodash_1.uniqBy)((v) => v.name), (0, lodash_1.map)((v) => (v.name, (0, lodash_1.join)((0, lodash_1.uniqBy)(v.classes), ','))), (0, lodash_1.map)(([n, c]) => `${n}:${c ? ` [${c}]` : ``}`), (0, lodash_1.join)('\n'))(entities);
    }
    metadata() {
        return {
            stopSequences: ['Text:'],
        };
    }
    create(query, _history, _ai) {
        return `
Extract the following entities mentioned in the text below. Use NA if entities is not found:
${this.entityValue}

Text: 
${query}
`;
    }
}
exports.ExtractInfoPrompt = ExtractInfoPrompt;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvcHJvbXB0cy9wcm9kdWN0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxtQ0FBMEQ7QUFFMUQsSUFBSyxXQU1KO0FBTkQsV0FBSyxXQUFXO0lBQ2QsMkNBQTRCLENBQUE7SUFDNUIseURBQTBDLENBQUE7SUFDMUMsMERBQTJDLENBQUE7SUFDM0MsNERBQTZDLENBQUE7SUFDN0MsNERBQTZDLENBQUE7QUFDL0MsQ0FBQyxFQU5JLFdBQVcsS0FBWCxXQUFXLFFBTWY7QUFFRCxJQUFLLFlBT0o7QUFQRCxXQUFLLFlBQVk7SUFDZixvQ0FBb0IsQ0FBQTtJQUNwQixnREFBZ0MsQ0FBQTtJQUNoQyxnREFBZ0MsQ0FBQTtJQUNoQyxvREFBb0MsQ0FBQTtJQUNwQyxrREFBa0MsQ0FBQTtJQUNsQyxnREFBZ0MsQ0FBQTtBQUNsQyxDQUFDLEVBUEksWUFBWSxLQUFaLFlBQVksUUFPaEI7QUFFRCxJQUFLLFdBVUo7QUFWRCxXQUFLLFdBQVc7SUFDZCxxREFBc0MsQ0FBQTtJQUN0Qyw2Q0FBOEIsQ0FBQTtJQUM5Qix3RUFBeUQsQ0FBQTtJQUN6RCw0REFBNkMsQ0FBQTtJQUM3QyxzREFBdUMsQ0FBQTtJQUN2Qyx5REFBMEMsQ0FBQTtJQUMxQyxvQ0FBcUIsQ0FBQTtJQUNyQiw4REFBK0MsQ0FBQTtJQUMvQyxvRUFBcUQsQ0FBQTtBQUN2RCxDQUFDLEVBVkksV0FBVyxLQUFYLFdBQVcsUUFVZjtBQVdEOzs7R0FHRztBQUNILE1BQWEsaUJBQWlCO0lBRzVCLFlBQVksUUFBeUI7UUFDbkMsSUFBSSxJQUFBLGdCQUFPLEVBQUMsUUFBUSxDQUFDLEVBQUU7WUFDckIsTUFBTSxJQUFJLEtBQUssQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO1NBQy9DO1FBRUQsMkJBQTJCO1FBQzNCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBQSxhQUFJLEVBQ3JCLElBQUEsZUFBTSxFQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQ3JCLElBQUEsWUFBRyxFQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBQSxhQUFJLEVBQUMsSUFBQSxlQUFNLEVBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFDbEQsSUFBQSxZQUFHLEVBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUM3QyxJQUFBLGFBQUksRUFBQyxJQUFJLENBQUMsQ0FDWCxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2QsQ0FBQztJQUVELFFBQVE7UUFDTixPQUFPO1lBQ0wsYUFBYSxFQUFFLENBQUMsT0FBTyxDQUFDO1NBQ3pCLENBQUM7SUFDSixDQUFDO0lBRUQsTUFBTSxDQUFDLEtBQWEsRUFBRSxRQUFzQixFQUFFLEdBQWM7UUFDMUQsT0FBTzs7RUFFVCxJQUFJLENBQUMsV0FBVzs7O0VBR2hCLEtBQUs7Q0FDTixDQUFDO0lBQ0EsQ0FBQztDQUNGO0FBaENELDhDQWdDQyJ9